<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Single threaded stories.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Rebeja</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://rebeja.eu/">
<link rel="next" href="index-1.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/declutter-the-way-of-working/" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="https://rebeja.eu/">

            <span id="blog-title">Rebeja</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav"></ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
    
        

    
        
    <div class="postindex">
            <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/declutter-the-way-of-working/" class="u-url">Declutter the way of working</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/declutter-the-way-of-working/" rel="bookmark">
            <time class="published dt-published" datetime="2019-09-12T18:25:23+03:00" itemprop="datePublished" title="2019-09-12 18:25">2019-09-12 18:25</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/declutter-the-way-of-working/#disqus_thread" data-disqus-identifier="cache/posts/declutter-the-way-of-working.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
Like many other people I strive to be as productive as I can. Being productive means two things for me:
</p>
<ul class="org-ul">
<li>Getting the most out of my tools and,</li>
<li>Spending less time on useless things.</li>
</ul>
<p>
Getting the most of my tools is the reason I continuously invest in learning <a href="https://www.gnu.org/software/emacs/">Emacs</a> (which has proven to have a great return of investment) and in learning <a href="http://visualstudioshortcuts.com/2017/">Visual Studio shortcuts.</a> It was for the same reason I was happy like a kid with a chocolate bar when Visual Studio introduced the <code>Ctrl+Q</code> shortcut for the <code>Quick Launch</code> menu which allowed me to launch various utilities from Visual Studio without bothering to learn shortcuts that aren't often used and without spending time navigating through the menu items looking for the one I had in mind.
</p>

<p>
Spending less time on useless things means having a good workflow and <i>I was not happy with mine</i>. And my workflow was quite simple — after getting to work, I would start my workstation, open Outlook and whatever instant messaging applications I needed to use, open Visual Studio, get latest sources from TFS, open required solutions and start coding. In between any of those steps I would make myself a cup of tea from which I would sip occasionally while working. It took me some time to do all those required steps before being able to actually read, write or debug some piece of code and albeit in time I got ahold of more powerful machines which loaded things faster, I wasn't happy with the sensation of <i>having to wait to start working</i>.
</p>

<p>
I started thinking on how to avoid waiting and I turned to the simplest solution for my problem — for every application that I needed to start at the beginning of the day I would put a shortcut in the Windows startup folder. This way, after getting to work I needed to boot my computer, log in and go make the tea while the applications were loading automatically. I couldn't load <i>all</i> the required applications that way — most of the time I needed to run Visual Studio with elevated permissions which halted the load of other applications due to the UAC settings — but I was happy to open all other applications automatically while making my tea and open Visual Studio manually.
</p>

<p>
Meanwhile I switched the workstation with a laptop and got the opportunity to work on a data science project at work, alongside the main project I'm assigned to. Having a laptop brings a great deal of flexibility and having a high-performance laptop with great battery life tends to make me want to work on it for <i>all</i> my projects.
</p>

<p>
And that's when things started to get complicated workflow-wise. The two projects I work on at my job have different technology stacks (<code>C#</code> with <code>.net core</code> on the main project and <code>Python</code> with <code>Azure ML</code> for the data science one) which means different workflows but still using the same applications for communication and other secondary tasks. In my spare time — early in the morning or late at night — I work on personal projects and that's when I feel the most infuriated with the plethora of applications that are starting automatically but are totally useless at that moment and do nothing more than consume resources.
</p>

<p>
At some point I realized that the time I used to spend a while ago to open the applications I needed, I now waste on closing the applications which are configured to start automatically but are of no use to me. Then I remembered that a while ago I read a <a href="https://bash.im/quote/436725">story about Russian DevOps engineer who would automate a task if it required more that 1.5 minutes of his time</a> (the English version and implementations of the scripts are available on <a href="https://github.com/NARKOZ/hacker-scripts">GitHub</a>). That story got me thinking:
</p>
<blockquote>
<p>
Can I change which applications are loaded automatically based on the project I'm working?
</p>
</blockquote>
<p>
Unfortunately, the answer is <b>no</b>. That's because my laptop won't know on which project I'll be working next. But my schedule might give a hint: all week except Thursday, from 9:00 to 18:00 I work on the main project at my job, on Thursdays from 9:00 to 18:00 I work on a secondary project and outside business hours I work on my other projects.
</p>

<p>
OK, and how do I use that information? Up until now I used to place shortcuts in Windows startup folder but that doesn't do it for me anymore. The problem with placing shortcuts in Windows startup folder is that there's no way to specify <i>when</i> to start the application — it will start all the time.
</p>

<p>
So I had to look elsewhere for a solution. The next place I looked was Windows Task Scheduler which provides more options for starting a task but unfortunately the triggers of Task Scheduler are either too simple to encode the ranges from my schedule or too complicated to bother with.
</p>

<p>
Thinking of how to make this decision simple I turned to PowerShell. I created two scripts, in each of them testing the following conditions:
</p>
<ul class="org-ul">
<li>Is current time between 9:00 and 18:00 and current day is a work day but not Thursday? If yes, then this means I'm at my job, working for the main project and thus:
<ul class="org-ul">
<li>The first script will:
<ul class="org-ul">
<li>navigate to the directory mapped to TFS project,</li>
<li>get latest version and</li>
<li>open the solution in Visual Studio.</li>
</ul>
</li>
<li>The second script will load other work-related applications like Outlook, MS Teams etc.</li>
</ul>
</li>
<li>Is current day Thursday and time is between 9:00 and 18:00? If yes, then I'm at my job working on the data science project and:
<ul class="org-ul">
<li>The first script will open <code>Ubuntu bash</code> from <code>WSL</code>.</li>
<li>The second script will open the <code>Azure ML workspace</code> in a browser.</li>
</ul>
</li>
</ul>
<p>
Each of these scripts is invoked by Windows Task Scheduler at logon; the only difference being that the first one is executed with elevated privileges. I still need to run Visual Studio as administrator and by running the script with highest privileges I don't get the UAC dialog anymore.
</p>

<p>
None of the aforementioned scripts do anything outside working hours — in that period I choose on which project to work based on what I feel like doing (to keep me engaged after a day at work) and various other factors. But the fact that, in those late or early hours I don't need to close some pesky little applications that keep distracting me, makes me be happy again with my workflow.
</p>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/eurolan-2019/" class="u-url">EUROLAN 2019 Summer School</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/eurolan-2019/" rel="bookmark">
            <time class="published dt-published" datetime="2019-05-24T14:49:19+03:00" itemprop="datePublished" title="2019-05-24 14:49">2019-05-24 14:49</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/eurolan-2019/#disqus_thread" data-disqus-identifier="cache/posts/eurolan-2019.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
I started drafting this post in the last day of <a href="http://eurolan.info.uaic.ro/2019/index.html">EUROLAN 2019 Summer School</a>; while the participants were about to take the last <a href="https://kahoot.it/">Kahoot!</a> quiz and fill the feedback form.
</p>

<p>
This was the first summer school where I was on the other side — in the organization committee and I have to admit that I liked it very much.
</p>

<p>
I liked the joy and enthusiasm of the participants which were as if they embarked for an adventure. Is some sense, this was an adventure for them, which could be seen from their attitude for handling the exercices — each task was tackled with maximum involvment and seriosity by everyone.
</p>

<p>
<img src="images/eurolan2019.jpg" alt="nil"></p>

<p>
The exercices were meant to cover a wide range of activities for computational linguistics — from manually annotating a small corpus of trainig phrases to training a machine learning model.
</p>

<p>
The mission of our micro-team (<a href="https://github.com/tiberiu44">Tiberiu Boroș</a>, <a href="https://github.com/cristian904">Cristian Pădurariu</a> and myself) was to teach the participants how to train a Machine Learning model using <a href="https://github.com/adobe/NLP-Cube">NLP-Cube</a> - a Natural Language Processing Framework where Tiberiu is the main contributor.
</p>

<p>
Knowing that there will be participants with both Windows and Mac OS, we settled in our discussions on enclosing <a href="https://github.com/RePierre/eurolan-2019"><code>NLP-Cube</code> into a Docker image</a> which would be built by each participant in order to train the model.
</p>

<p>
Unfortunately, despite our best efforts and the great presentation made by Tiberiu the results were disastrous — the laptops of over a half of participants didn't met Docker requirements; from the reamaining people a lot did not have enough disk space for the various transformations of the corpus and additional utilities. Overall, only a few persons were able to start the training process.
</p>

<p>
At the end of the school, the organization committee setup a small contest with for the participants: each team would have to come up with an idea of an application and after refining the idea they would get exactly 5 minutes to pitch the idea to the ad-hoc jury. The application was subject to the constraints of being somewhat feasible to develop and should use as many topics taught during the summer school as possible.
</p>

<p>
The ideas were great; the one that I liked the most was about an application that would do speech recognition for people suffering from some form of heavy speech impediment.
</p>

<p>
When a part of the jury went to deliberate over which team should get which prize, <a href="https://www.facebook.com/gabihaja">Gabriela Haja</a> started the closing speech. It was a simple, elegant and beautifull talk where she praised the ideas of the participants but also advised them that they would need to work hard on the ideas themselves and on the skills of the authors in order to see their idea put to practice.
</p>

<p>
Overall it was a great experience and I'm gratefull for the opportunity to participate. And now with the school long gone, I'm reviewing/archiving the to-do-list of activities for the summer school and building the list of…
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Lessons learned</h2>
<div class="outline-text-2" id="text-1">
<dl class="org-dl">
<dt> Infrastructure <i>is</i> a problem </dt>
<dd>We learned the hard way that not everyone has high-end laptops that can run resource-heavy applications.
</dd>
<dt> Murphy's law is still applicable </dt>
<dd>"Anything that can go wrong, will go wrong", Murphy's las states. And indeed, we had a participant that couldn't build the docker image for some reason but when we tried to load an already built image into docker via a USB stick, the USB port failed.
</dd>
<dt> Think and tailor your workshop for the audience </dt>
<dd>Being heavily involvment into software development, Tiberiu and I made some wrong assumptions — <i>people will know how to install Docker on their machines</i>, <i>the participants will know how to execute the command lines we provided</i> etc. The vast majority of the participants were linguists at core and such tasks that are perceived as trivial by us are surely not trivial for them.
</dd>
<dt> You learn a lot while teaching </dt>
<dd>This is something that cannot be overstated. I knew I will be learning a lot of new stuff from the collaboration with Tiberiu (I did not knew <code>NLP-Cube</code> existed befor this summer school) but to my great suprise I also learned a great deal of stuff just by being present and helping people.
</dd>
<dt> Allow yourself to fail </dt>
<dd>The dissapointing results of our endeavor to train a Machine Learning model had an impact on my morale but while discussing with the more experienced members of the committee
</dd>
</dl>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/2018-year-in-review/" class="u-url">2018 year in review</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/2018-year-in-review/" rel="bookmark">
            <time class="published dt-published" datetime="2019-01-01T15:06:26+02:00" itemprop="datePublished" title="2019-01-01 15:06">2019-01-01 15:06</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/2018-year-in-review/#disqus_thread" data-disqus-identifier="cache/posts/2018-year-in-review.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
Looking back at 2018 I can say for sure that it has been a busy and thankfully fruitfull year for me; I have managed to juggle work and community tasks while also spending time with my family.
</p>

<p>
So, without further ado here are my biggest accomplishments in 2018:
</p>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Presentation on Big Data Analytics</h2>
<div class="outline-text-2" id="text-1">
<p>
Being known as a <i>Big Data enthusiast</i> at my job, I was asked if I could give a presentation on <i>Big Data</i>. I was more than happy to do so and this way I got a glimpse at how it feels when giving a lecture - <a href="https://www.facebook.com/CentricITSolutionsRomania/posts/2868690433237180">the presentation was scheduled</a> in one of the big lecture rooms at the <a href="http://www.feaa.uaic.ro">Faculty Of Economics and Business Administration</a>; can't say I didn't liked the feeling. The <a href="https://1drv.ms/p/s!AhX9uvfmpbmJnd4LKQn-eGppDHGdeg">slides</a> are available from my OneDrive account.
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Artificial Neural Networks tutorial</h2>
<div class="outline-text-2" id="text-2">
<p>
A few weeks later I was <a href="https://www.facebook.com/infobalti/photos/a.1888888887828977/1888889244495608/">hosting a tutorial on Artificial Neural Networks</a> at <a href="http://usarb.md">Alecu Russo State University</a> from Bălți, Moldova. The tutorial was the first event at the <a href="http://www.miti2018.usarb.md/">International Conference on Mathematics, Informatics and Information Technologies</a> and also <b>my first academic talk</b>.
</p>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">PIN Magazine article about Artificial Intelligence</h2>
<div class="outline-text-2" id="text-3">
<p>
In june we celebrated one year since the <a href="https://iasi.ai/">Iași AI</a> community was created with a cover story in <a href="https://www.pinmagazine.ro/">PIN Magazine</a> about Artificial Intelligence. I authored one of the cover story articles in which I expressed my opinion about how Artificial Intelligence, although it had tremendous success lately, it's still at the beginning of its evolution and we, humans, must set our expectations accordingly but still expect that AI will change our lives. You can read the whole article <a href="https://issuu.com/danzaharia/docs/pinmagazine_9_cu_coperti/25">here</a>.
</p>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Iași AI TensorFlow workshops</h2>
<div class="outline-text-2" id="text-4">
<p>
At the end of August and in the beginning of October I co-hosted two <a href="https://iasi.ai/workshops/tensorflow-workshop-iasi-ai/">TensorFlow worksops</a> together with <a href="https://www.linkedin.com/in/ciprian-talmacel-6b08ba4a/">Ciprian Tălmăcel</a> organized by the <a href="https://iasi.ai/">Iași AI</a> community. This was my debut as a presenter within the community and proved to be a great experience and success. I had the opportunity to learn a lot from Ciprian and also to improve my skills through the feedback given by attendees. You can find the Jupyter Notebooks for the workshop in the <a href="https://github.com/IASIAI/tensorflow-workshop">dedicated Github repository</a>.
</p>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">RNN presentation @ Iași AI</h2>
<div class="outline-text-2" id="text-5">
<p>
A month later, in November, was my second appearance within the Iași AI community, this time with a presentation about <a href="https://iasi.ai/meetups/unrolling-recurrent-neural-networks/">Recurrent Neural Networks</a>. The main focus of a presentation was how simple the code can be if you possess the theoretical background and how you can actually learn (to some extent) the theory behind just looking at the implementation. I have published the slides, the code and the LaTeX code for the presentation in a <a href="https://github.com/RePierre/manelator">dedicated Github repository</a>.
</p>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Other activity @ Iași AI</h2>
<div class="outline-text-2" id="text-6">
<p>
Gladly, my activity within Iași AI community did not end with the RNN presentation; later on, I helped organize the <a href="https://iasi.ai/meetups/panel-ai-opportunities/">AI opportunities panel</a> which was the last official event of the community for 2018. In parallel we started puring more effort into implementing an Open Data Hub initiative for Iași; this however is a project for the upcomming year(s).
</p>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Promoted to Technical Lead</h2>
<div class="outline-text-2" id="text-7">
<p>
Last but not least, I got promoted at work. In April I switched projects at work and took the switch as an opportunity to affirm myself. The efforts I've put into building solid and scalable products and also improving the existing ones have been observed by the management team and at the end of the year I got promoted to the role of Technical Lead.
</p>

<p>
It's already the start of 2019 and I'm excited to what's comming ahead - the Open Data Hub, the newly opened opportunities at work, the upcomming projects in academia and many more I don't know of. What I do know is that <b>I will do my best to do even better in 2019</b>.
</p>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/english-romanian-dictionary-for-machine-learning/" class="u-url">English Romanian dictionary for Machine Learning</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/english-romanian-dictionary-for-machine-learning/" rel="bookmark">
            <time class="published dt-published" datetime="2018-11-16T00:00:00+02:00" itemprop="datePublished" title="2018-11-16 00:00">2018-11-16 00:00</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/english-romanian-dictionary-for-machine-learning/#disqus_thread" data-disqus-identifier="cache/posts/english-romanian-dictionary-for-machine-learning.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
This post is an initiative to build a list of Romanian translations for Machine Learning terms.
</p>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">A</h2>
<div class="outline-text-2" id="text-1">
<hr>
<p>
<i>Artificial Intelligence</i> = Inteligență Artificială
</p>
<hr>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">B</h2>
<div class="outline-text-2" id="text-2">
<hr>
<p>
<i>Biased</i> = tendențios, subiectiv.
</p>
<hr>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">E</h2>
<div class="outline-text-2" id="text-3">
<hr>
<p>
<i>Eigenvalues (vectors)</i> = valori (vectori) proprii.
</p>
<hr>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">F</h2>
<div class="outline-text-2" id="text-4">
<hr>
<p>
<i>Features</i> = atribute +, particularități, caracteristici, trăsături+.
</p>
<hr>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">G</h2>
<div class="outline-text-2" id="text-5">
<hr>
<p>
<i>Gold corpus</i> = corpus de referință
</p>
<hr>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">M</h2>
<div class="outline-text-2" id="text-6">
<hr>
<p>
<i>Machine Learning</i> = Învățare Automată
</p>
<hr>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">O</h2>
<div class="outline-text-2" id="text-7">
<hr>
<p>
<i>Outliers</i> = valori extreme.
</p>
<hr>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">S</h2>
<div class="outline-text-2" id="text-8">
<hr>
<p>
<i>Skewed</i> = nesimetric.
</p>
<hr>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">T</h2>
<div class="outline-text-2" id="text-9">
<hr>
<p>
<i>Threshold</i> = prag.
</p>

<p>
<i>Toy problem</i> = problemă didactică.
</p>

<hr>
<p>
<b>Acknowledgements</b>
</p>

<p>
Big thanks to <a href="https://www.facebook.com/gabihaja">Gabriela Haja</a> and <a href="https://profs.info.uaic.ro/~mmoruz/">Alex Moruz</a> for reviewing this list.
</p>
</div>
</div>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/automating-custom-workflow-in-emacs/" class="u-url">Automating custom workflow in Emacs</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/automating-custom-workflow-in-emacs/" rel="bookmark">
            <time class="published dt-published" datetime="2018-06-03T00:00:00+02:00" itemprop="datePublished" title="2018-06-03 00:00">2018-06-03 00:00</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/automating-custom-workflow-in-emacs/#disqus_thread" data-disqus-identifier="cache/posts/automating-custom-workflow-in-emacs.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
Due to the lack of human resources in a research project I'm involved the team decided to take upon itself the semantic comparison of 3000 pairs of papers from the medical domain.
</p>

<p>
Each paper is a <code>json</code> file with structured contents of the publication like in the picture below:
<img src="images/publication-json.png" alt="nil"></p>

<p>
Since we also want to do <span class="underline">at least some</span> cross-validation we decided that each member of the team should compare 2000 pairs of publications so that each pair will be compared by two out of three persons from the team.
So we split the 3000 publication pairs into 3 sets which were saved into <code>csv</code> files with the following structure: <code>file1, file2, similarity_score</code>; where <code>file1</code> and <code>file2</code> are the names of the files and <code>similarity_score</code> is to be filled with the semantic similarity score.
</p>

<p>
My first idea was to have Emacs split into three windows to allow for both registering the score and a side-by-side comparison of files:
<img src="images/comparison-layout.png" alt="nil"></p>

<p>
For each pair of files from the left window I would:
</p>
<ol class="org-ol">
<li>Copy the name of the first file using <code>C-a C-SPC C-u 2 M-f M-w</code>
</li>
<li>Go the the top window on the right using <code>C-x o 2</code> (I'm using <code>ace-window</code> thus after pressing <code>C-x o</code> I can select the window to switch to by pressing it's number key)
</li>
<li>Open the file using <code>C-x C-f</code> then navigating to the directory and yanking the file name at the end
</li>
<li>Move back to the first window using <code>C-x o 1</code>
</li>
<li>Copy the name of the second file by first moving over the first comma with <code>C-f</code> then <code>C-u 2 M-f M-w</code>
</li>
<li>Go to the bottom window on the right using <code>C-x o 3</code>
</li>
<li>Repeat step 3
</li>
<li>Repeat step 4
</li>
<li>Compare publications and register score in <code>similarity_score</code> column
</li>
</ol>
<p>
Although this workflow seems quite laborious due to so many steps I've gotten used quite rapidly (from the second pair) to it and managed to form some sort of temporary muscle memory for opening files in the sense that I was doing that on full auto-pilot, <i>without thinking that I'm opening files</i>.
</p>

<p>
However, there was a problem with this workflow: the directory in which the files to be compared are located contains around 100 K such <code>json</code> files and on my 5400 RPM hard-disk it took what seemed like forever to scan the directory when pressing <code>C-x C-f</code> in order to give me the benefit of autocompletion which I did not need because I <i>already knew the files names</i>. So basically for each pair of publications I was stuck waiting twice for the directory to be scanned.
</p>

<p>
And then I got an idea: <b>I already knew the file names; the directory containing them is the same so wouldn't it be faster to send the full path (obtained by concatenating file name and directory path) to <code>find-file</code> function instead of waiting for a directory scan?</b>
</p>

<p>
I switched to the <code>*scratch*</code> buffer and evaluated a <code>find-file</code> call with the full path of a file and of course, the file was loaded instantly.
</p>

<p>
So I decided to take it a bit further: <b>Can't I, while on a line in left window open the files on that line in the other two windows?</b>
</p>

<p>
Of course I can because <b>Emacs is awesome</b>. All I need to do is write some code lisp code that will do what I want.
</p>

<p>
Fisrt things first, I declared a (global) variable to hold the full path to the directory containing the files:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defvar</span> <span class="nv">*compare-publications-dir*</span>
  <span class="s">"&lt;directory-path&gt;"</span>
  <span class="s">"The location of files to compare."</span><span class="p">)</span>
</pre></div>
<p>
Then I created a function to get the whole line from the <code>csv</code> file:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">get-current-line</span><span class="p">()</span>
  <span class="p">(</span><span class="nf">progn</span>
    <span class="p">(</span><span class="nf">beginning-of-visual-line</span><span class="p">)</span>
    <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">start</span> <span class="p">(</span><span class="nf">point</span><span class="p">)))</span>
      <span class="p">(</span><span class="nf">end-of-visual-line</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">buffer-substring-no-properties</span> <span class="nv">start</span> <span class="p">(</span><span class="nf">point</span><span class="p">)))))</span>
</pre></div>
<p>
This function moves the point to the beginning of the line by calling <code>(beginning-of-visual-line)</code> then saves the position in a local variable <code>start</code> and moves to the end of the line via a call to <code>(end-of-visual-line)</code>. In the end it returns the substring which is between <code>start</code> position and the position returned by <code>(point)</code> function.
</p>

<p>
Having the line of text I need to:
a) Split the line by ~,~
b) Store first and second parts of the line into two variables called <code>file-1</code> and <code>file-2</code>
c) Move to the top-right window
d) Concatenate the values of <code>*compare-publications-dir*</code> and <code>file-1</code> and pass the result to <code>(find-file-readonly)</code> (I don't want to accidentally change the files being compared)
e) Move to the bottom-right window
f) Repeat d) with <code>file-2</code> instead of <code>file-1</code>
g) Return to the left window
</p>

<p>
This was also implemented with a function which can be called interactively via <code>M-x</code>:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">compare-publications</span><span class="p">()</span>
  <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">files</span> <span class="p">(</span><span class="nf">csv-split-string</span> <span class="p">(</span><span class="nf">get-current-line</span><span class="p">)</span> <span class="s">","</span><span class="p">))</span>
	 <span class="p">(</span><span class="nf">file-1</span> <span class="p">(</span><span class="nb">car </span><span class="nv">files</span><span class="p">))</span>
	 <span class="p">(</span><span class="nf">file-2</span> <span class="p">(</span><span class="nb">car </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">files</span><span class="p">))))</span>
    <span class="p">(</span><span class="nf">other-window</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">find-file-read-only</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">*compare-publications-dir*</span> <span class="nv">file-1</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">other-window</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">find-file-read-only</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">*compare-publications-dir*</span> <span class="nv">file-2</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">other-window</span> <span class="mi">1</span><span class="p">)))</span>
</pre></div>

<p>
And that's it. After calling <code>eval</code> on the functions above I have an automated workflow. Now, to compare two files, I just navigate to a line in the <code>csv</code> file and from there type <code>M-x compare-publications</code>. The only thing left to do manually (beside the comparison itself) is to press the key for the <code>similarity_score</code> of files from that line.
</p>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/serviceactivationexception-autofacservicehostfactory/" class="u-url">ServiceActivationException when auto-starting WCF services with AutofacServiceHostFactory</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/serviceactivationexception-autofacservicehostfactory/" rel="bookmark">
            <time class="published dt-published" datetime="2018-05-17T00:00:00+02:00" itemprop="datePublished" title="2018-05-17 00:00">2018-05-17 00:00</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/serviceactivationexception-autofacservicehostfactory/#disqus_thread" data-disqus-identifier="cache/posts/serviceactivationexception-autofacservicehostfactory.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
I switched teams at work and as a welcome gift into the new team I got to investigate the following error:
</p>
<blockquote>
<p>
  Exception: System.ServiceModel.ServiceActivationException: The service '/AuthorisationService.svc' cannot be activated due to an exception during compilation.  The exception message is: The AutofacServiceHost.Container static property must be set before services can be instantiated.. —&gt; System.InvalidOperationException: The AutofacServiceHost.Container static property must be set before services can be instantiated.
   at Autofac.Integration.Wcf.AutofacHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   — End of inner exception stack trace —
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.EnsureServiceAvailableFast(String relativeVirtualPath, EventTraceActivity eventTraceActivity)
Process Name: w3wp
Process ID: 9776
</p>
</blockquote>

<p>
The troublesome service is hosted in an <code>ASP.NET</code> web application and it's preloaded with a custom implementation of <a href="https://msdn.microsoft.com/en-us/library/system.web.hosting.iprocesshostpreloadclient(v=vs.110).aspx"><code>IProcessHostPreloadClient</code></a> which more or less does what's described in <a href="http://lazynreclined.blogspot.nl/2014/09/enable-autostart-in-iis-75-without.html">this blog post</a>.
Since the project hosting the service is using AutoFac as it's DI framework/library the service is setup to use <code>AutofacServiceHostFactory</code> as the service factory:
</p>
<div class="highlight"><pre><span></span>&lt;%@ ServiceHost
  Service="AuthorizationServiceImpl, AuthorizationService"
  Factory="Autofac.Integration.Wcf.AutofacServiceHostFactory, Autofac.Integration.Wcf" %&gt;
</pre></div>

<p>
After some googling for the error I turned out to the <a href="http://docs.autofac.org/en/latest/integration/wcf.html#was-hosting-and-non-http-activation">AutoFac documentation page</a> where I got the first idea of what is happening:
</p>
<blockquote>
<p>
When hosting WCF Services in WAS (Windows Activation Service), you are not given an opportunity to build your container in the Application<sub>Start</sub> event defined in your Global.asax because WAS doesn’t use the standard ASP.NET pipeline.
</p>
</blockquote>

<p>
Ok, great! Now I know that <code>ServiceHostingEnvironment.EnsureServiceAvailable()</code> method (which is called to activate the service) doesn't use the HTTP pipeline from ASP.NET. A solution to this issue is in the next paragraph of the documentation:
</p>

<blockquote>
<p>
The alternative approach is to place a code file in your <code>App_Code</code> folder that contains a type with a <code>public static void AppInitialize()</code> method.
</p>
</blockquote>

<p>
And that's what I did. I went to to the project in Visual Studio, added a <code>special ASP.NET folder</code> named <code>App_Code</code> and added a class named <code>AppStart</code> to it with a single method <code>public static void AppInitialize()</code> which contained all the required bootstrapping logic for AutoFac. I redeployed the application on but the error kept popping and it's after <b>carefully</b> reading the comments from <a href="https://stackoverflow.com/a/330720/844006">this StackOverflow answer</a> and <a href="https://blogs.msdn.microsoft.com/wenlong/2006/01/11/how-to-initialize-hosted-wcf-services/">this blog post on how to initialize WCF services</a> I found why the <code>AppInitialize</code> method wasn't invoked: <b>it was because the <code>AppStart.cs</code> needs it's build action to be <code>Content</code> not Compile</b>
</p>

<p>
So when getting the <code>ServiceActivationexception</code> with the error message <code>The AutofacServiceHost.Container static property must be set before services can be instantiated</code> make sure to have the following:
</p>
<ol class="org-ol">
<li>The special ASP.NET folder <code>App_Code</code>
</li>
<li>A class in <code>App_Code</code> having a method with this signature <code>public static void AppInitialize()</code> which contains all the required initialization code
</li>
<li>The build action of the file containing the above method is set to <code>Content</code> as shown in the picture below
</li>
</ol>
<p>
<img src="images/appinitialize.png" alt="nil"></p>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mediatr-handler-not-found-error-when-the-datacontext-couldnt-be-initialized/" class="u-url">MediatR - Handler not found error when the DataContext couldn't be initialized</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/mediatr-handler-not-found-error-when-the-datacontext-couldnt-be-initialized/" rel="bookmark">
            <time class="published dt-published" datetime="2018-02-02T00:00:00+02:00" itemprop="datePublished" title="2018-02-02 00:00">2018-02-02 00:00</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/mediatr-handler-not-found-error-when-the-datacontext-couldnt-be-initialized/#disqus_thread" data-disqus-identifier="cache/posts/mediatr-handler-not-found-error-when-the-datacontext-couldnt-be-initialized.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
<b>TL;DR</b>
</p>
<blockquote>
<p>
If you use MediatR package and it suddenly it fails with <code>Handler was not found for request of type &lt;type&gt;</code> inspect the dependencies of the handler it fails to create/invoke. One or more of those dependencies (a <code>DbContext</code> in my case) throws an error when instantiated and the error is making MediatR fail.
</p>
</blockquote>
<p>
<a href="https://jimmybogard.com/">Jimmy Bogard</a>s' <a href="https://github.com/jbogard/MediatR">MediatR</a> is a little gem of a package I like using because it enables a good separation of business logic from the boilerplate code and provides a clean and structured enforcement of the <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle</a>.
</p>

<p>
I use this package extensively in <a href="https://rise-tv.net">one of my outside work projects</a> (I'm proud to say that it's not a pet project anymore) to delegate requests/commands to their respective request/command handlers. The project itself consists of two parts - an ASP.NET MVC application for public access and back office management and a WebAPI application used for registering payments. In order to keep both Web Application and Web API URLs consistent (and pretty) I have hosted the Web API application as a virtual directory inside the main Web Application.
</p>

<p>
Recently, after an update of the application the payment module went down (giving me a tiny heart attack). As expected I dove into the application logs and after some thorough search I found the culprit with the following error message:
</p>
<blockquote>
<p>
An unhandled exception of type 'System.InvalidOperationException' occurred in MediatR.dll Additional information: Handler was not found for request of type GetAuthorizedUserRequest. Container or service locator not configured properly or handlers not registered with your container.
</p>
</blockquote>
<p>
The exception was popping inside the <a href="https://msdn.microsoft.com/en-us/library/system.web.http.authorizeattribute.isauthorized(v=vs.118).aspx"><code>IsAuthorized</code></a> method of a custom <a href="https://msdn.microsoft.com/en-us/library/system.web.http.authorizeattribute(v=vs.118).aspx"><code>AuthorizeAttribute</code></a>
</p>
<div class="highlight"><pre><span></span>protected override bool IsAuthorized(HttpActionContext actionContext)
{
    try
    {
	  var authorizationToken = new AuthorizationToken(actionContext.Request);
	  if (String.IsNullOrEmpty(authorizationToken.Value))
	  {
		return false;
	  }
	  var request = new GetAuthorizedUserRequest
	  {
		AuthorizationToken = authorizationToken.Value
	  };
	  var user = _securityService.GetAuthorizedUser(request);
	  return user != null;
    }
    catch (Exception)
    {
	  return false;
    }
}
</pre></div>
<p>
The first thing to do was to thoroughly inspect what does the IoC container (<code>StructureMap</code> in my case) has registered. After a glimpse through the output of <code>WhatDoIHave()</code> method I saw that the handler <code>GetAuthorizedUserRequestHandler</code> was indeed registered as a <code>IRequestHandler&lt;GetAuthorizedUserRequest, GetAuthorizedUserResponse&gt;</code>.
</p>

<p>
So, what is the problem then? The <code>InnerException</code> property of the exception that was caught was <code>null</code> and I was stuck.
</p>

<p>
On the dawn of divine inspiration I decided to comment out the existing constructor of the request handler and create a default one (also return a dummy user). It worked - the exception wasn't thrown and the user got authenticated.
</p>

<p>
However, the next request (dispatched through MediatR) that had to query something in the database failed which gave me the idea that there must be some issues with the <code>DbContext</code> initialization (I use Entity Framework).
Sure enough - when I put a breakpoint in the constructor of my <code>DataContext</code> class (derived from <code>DbContext</code>) I got an exception mentioning that the key "mssqllocaldb" is missing from <code>&lt;connectionStrings&gt;</code> section.
</p>

<p>
Then, I remembered that the latest code update also came with an update of Entity Framework NuGet package and it dawned upon me why the MediatR was failing. As I said in the beginning, the Web API application is hosted under the main Web Application. This means that the <code>&lt;entityFramework&gt;</code> configuration element in the child application is inherited from the parent one so the <code>Web.config</code> file of the child application did not contain any section related to Entity Framework.
When I did the upgrade of the NuGet package the installer added the configuration section with default values. Those default and wrong values were read by the <code>DbContext</code> class constructor and since the values were wrong the constructor failed. After deleting the <code>&lt;entityFramework&gt;</code> configuration element the application went back online.
</p>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/the-common-pitfalls-of-orm-frameworks-rbar/" class="u-url">The common pitfalls of ORM frameworks - RBAR</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/the-common-pitfalls-of-orm-frameworks-rbar/" rel="bookmark">
            <time class="published dt-published" datetime="2018-01-18T00:00:00+02:00" itemprop="datePublished" title="2018-01-18 00:00">2018-01-18 00:00</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/the-common-pitfalls-of-orm-frameworks-rbar/#disqus_thread" data-disqus-identifier="cache/posts/the-common-pitfalls-of-orm-frameworks-rbar.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
ORM frameworks are a great tool especially for junior developers because they allow bluring the line between the application logic and the data it crunches. Except that the aforementioned line blurring advantage may become a real production issue if not taken in consideration when writing the code.
</p>

<p>
Let us consider an example. Let's suppose we're working on a (what else?) e-commerce platform. Somewhere in the depts of that platform there is a <code>IOrderService</code> which exposes the following method:
</p>
<div class="highlight"><pre><span></span>public interface IOrderService
{
    void PlaceOrder(Guid customerId, IEnumerable&lt;OrderItem&gt; itemIds)
}
</pre></div>
<p>
where <code>OrderItem</code> holds the data about an ordered item.
</p>
<div class="highlight"><pre><span></span>public class OrderItem
{
    public Guid ItemId { get; set; }

    public int Quantity { get; set; }
}
</pre></div>
<p>
The <code>PlaceOrder</code> method needs to:
</p>
<ul class="org-ul">
<li>Lookup the <code>Customer</code> in the database
</li>
<li>Create a new <code>CustomerOrder</code> instance
</li>
<li>Add each <code>Item</code> to the order and decrease stock count
</li>
<li>Save the <code>CustomerOrder</code> in the database
</li>
</ul>
<p>
Of course, since we're using an ORM framework, the classes used by the repositories - <code>Customer</code>, <code>CustomerOrder</code> and <code>Item</code> - are mapped to database tables.
</p>

<p>
Given the above, someone would be tempted to implement the <code>PlaceOrder</code> method like this:
</p>
<div class="highlight"><pre><span></span>public void PlaceOrder(Guid customerId, IEnumerable&lt;OrderItem&gt; orderItems)
{
    var customer = _customerRepository.Get(customerId);
    var order = new CustomerOrder(customer);

    foreach(var orderedItem in orderItems)
    {
	var item = _itemRepository.Get(orderedItem.ItemId);
	item.DecreaseStockCount(orderedItem.Quantity);
	order.Add(item);
    }

    _customerOrderRepository.Register(order);
    _unitOfWork.Commit();
}
</pre></div>
<p>
And why wouldn't they? It seems the most straightforward transposition of the requirements defined above. The code behaves as expected in both Dev and QA environments and afterwards it's promoted to production where lies a database with hundreds of thousands of rows in the <code>Items</code> table. There also, the behavior is as expected until one day an eager customer wants to buy 980 distinct items (because why not?).
</p>

<p>
What happens with the code above? It <i>still</i> works well but the database command times out and the customer cannot place a <b>significant</b> order.
</p>

<p>
So what is the problem? Why it times out? Well, because the aforementioned line between application logic and database is blurred enough for the iterative paradigm to creep into the set-based one. In the SQL community this paradigm creep has a name - <a href="https://www.red-gate.com/simple-talk/sql/t-sql-programming/rbar--row-by-agonizing-row/">Row By Agonizing Row</a>.
</p>

<p>
To put it in the context of the example above - <b>it takes more time to do 980 pairs of <code>SELECT</code> and <code>UPDATE</code> operations than to do one <code>SELECT</code> which returns 980 rows followed by one <code>UPDATE</code> which alters 980 rows</b>.
</p>

<p>
So, let's switch the paradigm and start working with collections in our code to minimize the number of operations in the database. The first thing to do is to load all items in bulk instead of loading them one by one. This will reduce the number of <code>SELECT</code> operations <b>from 980 to 1</b> (a whooping 50% of the number of operations). We still need to update the stock counts for each item individually because the ORM framework doesn't know how to translate the changes for each item into a single <code>UPDATE</code> statement but considering that we've halved the total number of operations let's give this approach a try shall we?
</p>
<div class="highlight"><pre><span></span>public void PlaceOrder(Guid customerId, IEnumerable&lt;OrderItem&gt; orderItems)
{
    var customer = _customerRepository.Get(customerId);
    var customerOrder = new CustomerOrder();

    var items = itemRepository.Items
	.Join(orderItems,
	      item =&gt; item.Id,
	      orderedItem =&gt; orderedItem.ItemId,
	      (item, _) =&gt; item)
	.ToDictionary(i =&gt; i.Id);

    foreach(var orderedItem in orderedItems)
    {
	var item  = items[orderedItem.ItemId];
	item.DecreaseStockCount(orderedItem.Quantity);
	customerOrder.Add(item);
    }

    _customerOrderRepository.Register(order);
    _unitOfWork.Commit();
}
</pre></div>
<p>
This will solve the problem with the timeout but will create another one - useless load on the system. The code loads 980 rows from the database but only uses two attributes of each row - <code>Id</code> and <code>Barcode</code>. We might say that this can be solved by projecting an <code>Item</code> into a tuple of <code>&lt;Barcode, Id&gt;</code> but this would be a partial solution because we can still place a great burden on system memory by sending an request of 10k items.
Also, there are still 980 <code>UPDATE</code> statements that need to be executed which is still <b>a lot</b>.
</p>

<p>
The best approach to this is to not load any data at all from the database and to do the processing as close to the actual data as possible.
And how can we do that? Exactly - with <code>stored procedures</code>.
</p>
<div class="highlight"><pre><span></span><span class="k">declare</span> <span class="k">procedure</span> <span class="n">CreateCustomerOrder</span><span class="p">(</span>
	<span class="o">@</span><span class="n">customerId</span> <span class="n">uniqueidentifier</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span>
	<span class="o">@</span><span class="n">orderItems</span> <span class="n">udttorderitems</span> <span class="n">readonly</span><span class="p">)</span>
<span class="k">begin</span>
    <span class="k">set</span> <span class="n">no_count</span> <span class="k">on</span>

    <span class="k">update</span> <span class="n">sc</span>
    <span class="k">set</span> <span class="n">sc</span><span class="p">.</span><span class="k">Count</span> <span class="o">=</span> <span class="n">sc</span><span class="p">.</span><span class="k">Count</span> <span class="o">-</span> <span class="n">o</span><span class="p">.</span><span class="n">Quantity</span>
    <span class="k">from</span> <span class="n">StockCounts</span> <span class="n">sc</span>
    <span class="k">join</span> <span class="n">Items</span> <span class="n">i</span> <span class="k">on</span> <span class="n">sc</span><span class="p">.</span><span class="n">ItemId</span> <span class="o">==</span> <span class="n">i</span><span class="p">.</span><span class="n">Id</span>
    <span class="k">join</span> <span class="o">@</span><span class="n">orderItems</span> <span class="mi">0</span> <span class="k">on</span> <span class="n">i</span><span class="p">.</span><span class="n">Id</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">ItemId</span>

    <span class="k">insert</span> <span class="k">into</span> <span class="n">CustomerOrder</span><span class="p">(</span><span class="n">CustomerId</span><span class="p">,</span> <span class="n">OrderDateTime</span><span class="p">)</span>
    <span class="k">values</span> <span class="p">(</span><span class="o">@</span><span class="n">customerId</span><span class="p">,</span> <span class="n">GetDate</span><span class="p">())</span>

    <span class="k">insert</span> <span class="k">into</span> <span class="n">OrderLines</span><span class="p">(</span><span class="n">OrderId</span><span class="p">,</span> <span class="n">ItemId</span><span class="p">,</span> <span class="n">Quantity</span><span class="p">)</span>
    <span class="k">select</span> <span class="n">scope_identity</span><span class="p">(),</span> <span class="n">i</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="n">o</span><span class="p">.</span><span class="n">Quantity</span>
    <span class="k">from</span> <span class="n">Items</span> <span class="n">i</span>
    <span class="k">join</span> <span class="o">@</span><span class="n">orderItems</span> <span class="n">o</span> <span class="k">on</span> <span class="n">o</span><span class="p">.</span><span class="n">ItemId</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">Id</span>
<span class="k">end</span>
</pre></div>
<p>
Now, of course in real life situations there won't be a customer that orders almost 1000 items with a single order and the second approach (bulk load items and iterate the collection) will do just fine.
The important thing to keep in mind in such cases is the need to switch from a procedural mindset to a set-based one thus pruning this phenomenon of paradigm creep which can become a full-blown RBAR processing.
</p>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/python-development-using-emacs-from-terminal/" class="u-url">Python development using Emacs from terminal</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/python-development-using-emacs-from-terminal/" rel="bookmark">
            <time class="published dt-published" datetime="2017-09-29T00:00:00+02:00" itemprop="datePublished" title="2017-09-29 00:00">2017-09-29 00:00</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/python-development-using-emacs-from-terminal/#disqus_thread" data-disqus-identifier="cache/posts/python-development-using-emacs-from-terminal.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
A few weeks ago, while working on a hackathon project I found myself very disappointed with my progress.
</p>

<p>
I had the impression that I can do better but something is holding me back and then I realized that I was too distracted by <code>Alt-Tab</code>-ing through all open applications, iterating through dozens of open tabs in the browser and spending too much time on websites that were of no use at that time.
</p>

<p>
At that moment, on a whim I decided to try and eliminate all of these distractions the hard way - <b>by not using the X server at all</b> (I was working on <a href="https://kubuntu.org/">Kubuntu</a>).
</p>

<p>
Since I was mainly working with Python code and occasionally I would need to open some file for inspection and all of these were done from Emacs I said to myself:
</p>
<blockquote>
<p>
Emacs can be opened from console so why not start working on hackathon from console?
</p>
</blockquote>
<p>
Said and done. <code>Ctrl-Alt-F1</code> and I was prompted with the TTY cursor. I logged in, started Emacs opened all the required files and started working. All good until I found myself in the situation where I needed to lookup something on the Internet. I knew I could use <code>eww</code> as a web browser so normally I did so (yeah, I'm one of those people that use Bing instead of Google):
</p>
<div class="highlight"><pre><span></span>M-x eww
Enter URL or keywords: www.bing.com
</pre></div>
<p>
And nothing… Oh, wait, I remember needing to enter some username and password when connecting to the Wi-Fi but I wasn't prompted for those after logging into terminal. How do I connect to the network?
</p>

<p>
As there was no way for me to find that out without using some sort of GUI (I'm not that good with terminals) I started a new X session, connected from there to Wi-Fi and found this <a href="https://askubuntu.com/a/461831/561980">StackOverflow answer</a>. So I logged back to the terminal and from Emacs started <b>eshell</b> with <code>M-x eshell</code>. From there I issued the following command
</p>
<div class="highlight"><pre><span></span>nmcli c up &lt;wi-fi-name&gt;
</pre></div>
<p>
which connected me to the Wi-Fi network.
</p>

<p>
Note: I got connected because on previous sessions I opted to store the credentials for the connection; to get a prompt for username and password for the Wi-Fi use the <code>--ask</code> parameter like this:
</p>
<div class="highlight"><pre><span></span>nmcli --ask c up &lt;wi-fi-name&gt;
</pre></div>

<p>
After connecting I resumed my coding and only at the end of the hackathon I stopped to ponder upon my experience; it wasn't as smooth as I expected. Although I consider a big plus the fact that I was able to issue shell commands within Emacs through <b>eshell</b> there were some hick-ups along the way.
</p>

<p>
The first thing I noticed is that under terminal not all shortcuts that are very familiar for me are available. Namely, in <b>org-mode</b> the combination <code>M-right</code> which is used for indentation, moving columns within a table and demoting list items is not available; instead I had to use either <code>C-c C-x r</code> shortcut or explicitly invoke the command using <code>M-x org-meta-right</code>. Although I did not invoke this command frequently, without the shortcut I felt like I was pulled out of <a href="https://en.wikipedia.org/wiki/Flow_(psychology)">the flow</a> each time I had to use an alternative method of invoking the command.
</p>

<p>
The second and by far the biggest nuisance was the lack of proper web-browsing experience. Although I most frequently landed on StackOverflow pages and although <b>eww</b> rendered them pretty good (see image below) the lack of visual experience <i>I was used to</i> gave me a sense of discomfort.
<img src="images/eww-stackoverflow-2.png" alt="nil"></p>

<p>
However, when I got to analyze how much I have accomplished while working from terminal I was simply <b>amazed</b>. Having no distraction and meaningless motion like cycling through windows and tabs had a huge impact on my productivity. I was able to fully concentrate and immerse in the code and by doing so I had <b>a lot</b> of work done.
</p>
                </div>
            </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/rename-multiple-files-with-emacs-dired/" class="u-url">Rename multiple files with Emacs dired</a></h1>
                <div class="metadata">
                    <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                        Petru Rebeja
                    </span></p>
            <p class="dateline">
            <a href="posts/rename-multiple-files-with-emacs-dired/" rel="bookmark">
            <time class="published dt-published" datetime="2017-08-22T00:00:00+02:00" itemprop="datePublished" title="2017-08-22 00:00">2017-08-22 00:00</time></a>
            </p>
                        <p class="commentline">
        
    <a href="posts/rename-multiple-files-with-emacs-dired/#disqus_thread" data-disqus-identifier="cache/posts/rename-multiple-files-with-emacs-dired.html">Comments</a>


                </p>
</div>
            </header><div class="e-content entry-content">
                    <p>
While adding text files from within a folder to a project file I noticed that the files in the folder were lacking naming consistency. Namely, there were files which had the <code>.txt</code> extension and files without extension, as shown in the image below:
<img src="images/emacs-dired-files-without-extension.png" alt="nil"></p>

<p>
Since there were about 100 files without extension I started asking myself: <b>Is there a way to add .txt extension to those files without manually renaming each one</b>?
</p>

<p>
Of course there is. Here's what I did using Emacs and <code>dired</code>:
</p>
<ul class="org-ul">
<li>
<code>M-x dired</code> to the desired directory (obviously)
</li>
<li>In the <code>dired</code> buffer enter the <b>edit mode</b> with <code>C-x C-q</code>
</li>
<li>Go to the last file that has extension before the block of files without extension.
</li>
<li>Starting from that file, place a mark and select the whole block of files without extension (the selection should include the last file with extension).
</li>
<li>Narrow to the selected region using <code>M-x narrow-to-region</code> or <code>C-x n n</code> The buffer should look like the image below:
<img src="images/emacs-dired-narrowed.png" alt="nil">
</li>
<li>Move to the beginning of buffer using <code>M-&lt;</code>
</li>
<li>Start defining a new keyboard macro using <code>C-x (</code>
<ul class="org-ul">
<li>Move to next line using <code>C-n</code>
</li>
<li>Navigate to the end of line using <code>C-e</code>
</li>
<li>Add the <code>.txt</code> extension
</li>
</ul>
</li>
<li>Save the macro with <code>C-x )</code>
</li>
<li>Now that I have a macro to add <code>.txt</code> extension to a file name I just need to run it as many times as there are unnamed files (100 in my case). To do so just <code>C-u 100 F4</code>. This will repeat the macro 100 times.
</li>
<li>Once all the files are renamed exit the <b>narrow-region</b> using <code>M-x widen</code> or <code>C-x n w</code>
</li>
<li>Save changes with <code>C-c C-c</code>
</li>
</ul>
<p>
That's it!
</p>
                </div>
            </article>
</div>
    
        <ul class="pager postindexpager clearfix">
<li class="next"><a href="index-1.html" rel="next">Older posts</a></li>
        </ul>
<script>var disqus_shortname="rebeja";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><!--End of body content--><footer id="footer">
            Contents © 2019         <a href="mailto:petru.rebeja@gmail.com">Petru Rebeja</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


        <script src="assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
